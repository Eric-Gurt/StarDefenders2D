"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var constants_1 = require("./constants");
var helpers_1 = require("./helpers");
var ParseMessage = function (ev) {
    var data = ev.data;
    var key;
    var parsedData;
    var JSONString = helpers_1.isJSONString(data);
    if (!JSONString && helpers_1.isRawMessage(data)) {
        key = constants_1.EVENTS.RAW_MESSAGE;
        parsedData = data;
    }
    else if (JSONString) {
        data = JSON.parse(data);
        key = Object.keys(data)[0];
        parsedData = data[key];
    }
    else {
        key = 'error';
        parsedData = new Error(constants_1.ERRORS.COULD_NOT_PARSE_MESSAGE);
    }
    return { key: key, data: parsedData };
};
exports.default = ParseMessage;
//# sourceMappingURL=parseMessage.js.map